## 日志模块：redo log

### WAl

​	先写日志，再写磁盘

redo log是固定大小的，如果空间被沾满了，那么就会写到磁盘中。

有了redo log, InnoDB就可以保证即使数据库发生了异常，之前提交的记录也不会丢失。

## binlog(归档日志)

### 这两种日志的不同

1. redo log 是 InnoDB 引擎特有的；binlog 是 MySQL 的 Server 层实现的，所有引擎
   都可以使用。

2. redo log 是物理日志，记录的是“在某个数据页上做了什么修改”；binlog 是逻辑日
   志，记录的是这个语句的原始逻辑，比如“给 ID=2 这一行的 c 字段加 1 ”。
3. redo log 是循环写的，空间固定会用完；binlog 是可以追加写入的。“追加写”是指
   binlog 文件写到一定大小后会切换到下一个，并不会覆盖以前的日志  

### 两阶段提交

​	为了让这两份日志之间的逻辑一致

## 总结

redo log 用于保证 crash-safe 能力。innodb_flush_log_at_trx_commit 这个参数设置成1 的时候，表示每次事务的 redo log 都直接持久化到磁盘。  

sync_binlog 这个参数设置成 1 的时候，表示每次事务的 binlog 都持久化到磁盘。  